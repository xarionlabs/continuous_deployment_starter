# --- Airflow Core Settings for Local Development ---
AIRFLOW_IMAGE_NAME=airflow-shopify-dags-dev:latest # Or apache/airflow:3.0.2-python3.9 if not using custom Dockerfile build
AIRFLOW_UID=50000          # Host user ID, ensure this user can write to ./logs, ./plugins
AIRFLOW_GID=0              # Group ID, 0 for root group often works well with official Airflow images
AIRFLOW_WEBSERVER_HOST_PORT=8081 # Host port to access Airflow UI (e.g., http://localhost:8081)
AIRFLOW_FERNET_KEY= # Auto-generated if blank by docker-compose, or set a fixed one for stable encrypted connections. E.g. $(python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")

# --- Airflow Metadata Database (dedicated Postgres for local dev Airflow) ---
# These settings are for the 'postgres_airflow_meta' service in applications/airflow_dags/docker-compose.yaml
POSTGRES_USER=airflow_user
POSTGRES_PASSWORD=airflow_pass
POSTGRES_HOST=postgres_airflow_meta   # Service name in docker-compose
POSTGRES_PORT=5432                    # Internal port within Docker network for Airflow's metadata DB
POSTGRES_DB_AIRFLOW=airflow_metadata
AIRFLOW_METADATA_DB_HOST_PORT=5434    # Host port to access this Airflow metadata DB (e.g., via pgAdmin)

# --- Airflow Admin User (created by airflow-init) ---
AIRFLOW_ADMIN_USER=admin
AIRFLOW_ADMIN_PASSWORD=admin

# --- Shopify Connection Details (for DAGs) ---
# These are read by shopify_common.py and used if Airflow Variables/Connections are not set in UI.
# For production, always use Airflow Connections/Variables via UI or CLI for security.
SHOPIFY_API_KEY="your_shopify_api_key"
SHOPIFY_API_PASSWORD="your_shopify_api_password_or_admin_api_access_token"
SHOPIFY_STORE_DOMAIN="your-store.myshopify.com" # e.g., my-shop.myshopify.com

# --- Application Database Connection (for DAGs to write Shopify data into) ---
# These environment variables are used by entrypoint_dev.sh to automatically create an
# Airflow Connection with the ID specified by AIRFLOW_CONN_APP_DB_CONN_ID.
# The DAGs (shopify_common.py) will then use this Airflow Connection ID.
# Set APP_DB_HOST according to how your main application database is accessible from Docker:
# - 'host.docker.internal' (Docker Desktop Mac/Win if DB is on host)
# - '172.17.0.1' (Typical Docker bridge IP on Linux if DB is on host)
# - Service name of your main DB container if it's on the same Docker network.
APP_DB_HOST=host.docker.internal
APP_DB_PORT=5432 # Port your main application DB is listening on
APP_DB_NAME=app_db # Name of your main application database
APP_DB_USER=admin
APP_DB_PASSWORD=admin
AIRFLOW_CONN_APP_DB_CONN_ID=app_db_main_application # Airflow Connection ID used by DAGs
